h1 { color: #2c3e50; text-shadow: 1px 1px #bdc3c7; }

    /* æ ¸å¿ƒåˆ†æ•°æ¿ */
    #score-board {
        background: linear-gradient(to right, #2c3e50, #4ca1af);
        color: white;
        padding: 20px 50px;
        border-radius: 15px;
        box-shadow: 0 10px 20px rgba(0,0,0,0.2);
        display: inline-block;
        margin: 20px 0;
        border: 4px solid #fff;
        position: sticky; top: 10px; z-index: 100;
    }

    #total-stars { font-size: 60px; font-weight: bold; }
    .label { font-size: 18px; opacity: 0.9; }

    /* è¡¨æ ¼æ ·å¼ */
    table {
        width: 100%;
        border-collapse: collapse;
        background-color: white;
        box-shadow: 0 4px 10px rgba(0,0,0,0.05);
        border-radius: 10px;
        overflow: hidden;
        margin-bottom: 30px;
    }

    th, td { padding: 15px; border-bottom: 1px solid #eee; font-size: 16px; }
    
    /* æŒ‰é’®é€šç”¨ */
    button { border: none; padding: 10px 18px; border-radius: 6px; cursor: pointer; font-size: 15px; transition: 0.2s; color: white; }
    button:active { transform: scale(0.95); }

    /* ğŸŸ¢ æ­£å‘è¡Œä¸ºï¼ˆåŠ åˆ†ï¼‰ */
    .task-header { background-color: #27ae60; color: white; }
    .btn-add { background-color: #27ae60; box-shadow: 0 4px #1e8449; }

    /* ğŸ”´ è´Ÿé¢è¡Œä¸ºï¼ˆæ‰£åˆ†ï¼‰ - æ ¸å¿ƒæ–°å¢ */
    .penalty-header { background-color: #c0392b; color: white; }
    .btn-minus { background-color: #c0392b; box-shadow: 0 4px #922b21; }

    /* ğŸ”µ ç‰¹æƒå•†åº— */
    .store-header { background-color: #2980b9; color: white; }
    .btn-buy { background-color: #2980b9; box-shadow: 0 4px #1f618d; }

    .category { background-color: #ecf0f1; font-weight: bold; color: #7f8c8d; text-align: left; padding-left: 20px; }

    /* æç¤ºæ¡† */
    #message-box {
        position: fixed; top: 30px; right: 30px;
        padding: 15px 25px; border-radius: 8px; color: white;
        font-weight: bold; opacity: 0; transition: opacity 0.5s; z-index: 1000;
    }
</style>

<h1>âš¡ ç”·å­æ±‰è¡Œä¸ºè®­ç»ƒç³»ç»Ÿ âš¡</h1>

<div id="score-board">
    <div class="label">å½“å‰æˆ˜æ–—åŠ›ï¼ˆæ˜Ÿæ˜Ÿï¼‰</div>
    <span id="total-stars">0</span> â­
</div>
<div id="message-box"></div>

<h2 style="color: #c0392b;">ğŸš¨ è­¦ç¤ºåŒºï¼šè¿è§„æ‰£åˆ†</h2>
<table>
    <thead class="penalty-header">
        <tr>
            <th width="60%">è¿è§„è¡Œä¸º</th>
            <th width="20%">æƒ©ç½š</th>
            <th width="20%">æ‰§è¡Œ</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>ğŸ˜¡ å¯¹é•¿è¾ˆå¤§å¼å¤§å« / é¡¶å˜´</td>
            <td style="color:#c0392b; font-weight:bold;">-20 â­</td>
            <td><button class="btn-minus" onclick="updateScore(-20, 'penalty')">æ‰£åˆ†</button></td>
        </tr>
        <tr>
            <td>ğŸ¢ ç£¨ç£¨è¹­è¹­ï¼Œä¸å®ˆæ—¶é—´</td>
            <td style="color:#c0392b; font-weight:bold;">-10 â­</td>
            <td><button class="btn-minus" onclick="updateScore(-10, 'penalty')">æ‰£åˆ†</button></td>
        </tr>
        <tr>
            <td>ğŸ“± æœªç»å…è®¸å·ç©ç”µå­äº§å“</td>
            <td style="color:#c0392b; font-weight:bold;">-50 â­</td>
            <td><button class="btn-minus" onclick="updateScore(-50, 'penalty')">é‡ç½š</button></td>
        </tr>
    </tbody>
</table>

<h2 style="color: #27ae60;">ğŸ›¡ï¸ ä»»åŠ¡åŒºï¼šç§¯ç´¯è£è€€</h2>
<table>
    <thead class="task-header">
        <tr>
            <th>æŒ‘æˆ˜ä»»åŠ¡</th>
            <th>å¥–åŠ±</th>
            <th>ç¡®è®¤</th>
        </tr>
    </thead>
    <tbody>
        <tr><td colspan="3" class="category">âš”ï¸ æ„å¿—åŠ›æŒ‘æˆ˜ï¼ˆè‡ªå¾‹ï¼‰</td></tr>
        <tr><td>â° ç‹¬ç«‹æŒ‰æ—¶å®Œæˆä½œä¸šï¼ˆä¸ç”¨å‚¬ï¼‰</td><td><b>+5</b> â­</td><td><button class="btn-add" onclick="updateScore(5, 'task')">å®Œæˆ</button></td></tr>
        <tr><td>ğŸ» ä¸“æ³¨ç»ƒç´ï¼ˆä¸å‘è„¾æ°”ï¼‰</td><td><b>+3</b> â­</td><td><button class="btn-add" onclick="updateScore(3, 'task')">å®Œæˆ</button></td></tr>
        
        <tr><td colspan="3" class="category">ğŸ¤ è´£ä»»ä¸æ‹…å½“ï¼ˆè´¡çŒ®ï¼‰</td></tr>
        <tr><td>ğŸ‘¶ å¸¦æ²«æ²«ç©è€ / è®²æ•…äº‹</td><td><b>+10</b> â­</td><td><button class="btn-add" onclick="updateScore(10, 'task')">å®Œæˆ</button></td></tr>
        <tr><td>ğŸ”§ ååŠ©çˆ¸çˆ¸ä¿®ç†/æ¬è¿é‡ç‰©</td><td><b>+15</b> â­</td><td><button class="btn-add" onclick="updateScore(15, 'task')">å®Œæˆ</button></td></tr>
        <tr><td>ğŸš² è´Ÿè´£å®¶åº­æ–°é—»æ’­æŠ¥/æ•´ç†é¤æ¡Œ</td><td><b>+5</b> â­</td><td><button class="btn-add" onclick="updateScore(5, 'task')">å®Œæˆ</button></td></tr>
    </tbody>
</table>

<h2 style="color: #2980b9;">ğŸ† æƒç›Šå•†åº—ï¼šç‰¹æƒå…‘æ¢</h2>
<table>
    <thead class="store-header">
        <tr>
            <th>ç‰¹æƒåç§°</th>
            <th>èŠ±è´¹</th>
            <th>å…‘æ¢</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>ğŸ® ç©æ‰‹æœº 30 åˆ†é’Ÿ</td>
            <td style="color:#e60000; font-weight:bold;">-50 â­</td>
            <td><button class="btn-buy" onclick="updateScore(-50, 'store')">å…‘æ¢</button></td>
        </tr>
        <tr>
            <td>ğŸ‘‘ <b>å‘¨æœ«æŒ‡æŒ¥å®˜</b> (å†³å®šå…¨å®¶å»å“ªç©)</td>
            <td style="color:#e60000; font-weight:bold;">-300 â­</td>
            <td><button class="btn-buy" onclick="updateScore(-300, 'store')">å…‘æ¢</button></td>
        </tr>
        <tr>
            <td>ğŸ› ï¸ <b>å·¥å…·ç®±ä½¿ç”¨æƒ</b> (å’Œçˆ¸çˆ¸ä¸€èµ·)</td>
            <td style="color:#e60000; font-weight:bold;">-100 â­</td>
            <td><button class="btn-buy" onclick="updateScore(-100, 'store')">å…‘æ¢</button></td>
        </tr>
    </tbody>
</table>

<script>
    // è¯»å–ä¹‹å‰çš„æ˜Ÿæ˜Ÿï¼ˆå¦‚æœæ²¡æœ‰å°±é»˜è®¤ä¸º0ï¼‰
    let currentScore = parseInt(localStorage.getItem('myStarScore')) || 0;
    document.getElementById('total-stars').innerText = currentScore;

    function updateScore(points, type) {
        // æ£€æŸ¥ä½™é¢
        if (points < 0 && type === 'store') {
            if (currentScore + points < 0) {
                showMessage("âŒ ä½ çš„è£è€€å€¼ä¸è¶³ï¼Œæ— æ³•å…‘æ¢ï¼", "error");
                return;
            }
        }

        // è®¡ç®—å¹¶ä¿å­˜
        currentScore += points;
        localStorage.setItem('myStarScore', currentScore); // è‡ªåŠ¨ä¿å­˜åŠŸèƒ½
        document.getElementById('total-stars').innerText = currentScore;

        // åé¦ˆç‰¹æ•ˆ
        if (type === 'task') {
            showMessage("âš”ï¸ ä»»åŠ¡è¾¾æˆï¼è£è€€ + " + points, "success");
            fireworks(); 
        } else if (type === 'penalty') {
            showMessage("âš ï¸ è¿è§„æ‰£åˆ†ï¼è£è€€ - " + Math.abs(points), "error");
            // å¯ä»¥åœ¨è¿™é‡ŒåŠ ä¸€ä¸ªâ€œç ´ç¢â€çš„éŸ³æ•ˆï¼Œæˆ–è€…å±å¹•éœ‡åŠ¨
        } else if (type === 'store') {
            showMessage("âœ… å…‘æ¢æˆåŠŸï¼", "info");
        }
    }

    function showMessage(text, type) {
        const box = document.getElementById('message-box');
        box.innerText = text;
        box.style.opacity = 1;
        box.style.backgroundColor = type === 'success' ? '#27ae60' : (type === 'error' ? '#c0392b' : '#2980b9');
        setTimeout(() => { box.style.opacity = 0; }, 2000);
    }

    function fireworks() {
        var count = 200;
        var defaults = { origin: { y: 0.7 } };
        function fire(particleRatio, opts) {
            confetti(Object.assign({}, defaults, opts, {
                particleCount: Math.floor(count * particleRatio)
            }));
        }
        fire(0.25, { spread: 26, startVelocity: 55, });
        fire(0.2, { spread: 60, });
    }
</script>